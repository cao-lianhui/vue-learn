name: Deploy Docs to gh-pages

on:
  push:
    branches:
      - main  # 触发部署的分支

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2
      with:
        node-version: '16'

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '16'

    - name: Build and Deploy
      run: |
        npm i -g pnpm@6.30.1
        pnpm i
        pnpm docs:build  # 根据你的项目需要执行构建步骤

        # 部署到 gh-pages 分支
        git config --global user.name bygsn
        git config --global user.email 2167193766@qq.com
        git checkout --orphan gh-pages
        git rm -rf .
        cp -r docs/.vitepress/dist .
        git add .
        git commit -m "Deploy docs to gh-pages"
        git push -f origin gh-pages
