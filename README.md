## pnpm


### åŸºæœ¬å‘½ä»¤


`pnpm` çš„å¤§éƒ¨åˆ†å‘½ä»¤å…¼å®¹ `npm/yarn`ã€‚

æ¯”å¦‚ï¼Œå®‰è£…ä¾èµ–æ—¶ï¼Œä¸‰è€…æ˜¯ç­‰ä»·çš„ï¼š

```sh
# npm
npm install koa

# yarn
yarn add koa

# pnpm: å¯ä»¥ä½¿ç”¨ install æˆ– add
pnpm install koa
pnpm add koa
```

å¯åŠ¨ `package.json` çš„è„šæœ¬æ—¶ï¼Œä¹Ÿå…¼å®¹ `npm/yarn` çš„å†™æ³•ï¼š
```sh
# npm
npm run dev

# yarn
yarn dev

# pnpm: run å¯ä»¥ä½¿ç”¨ä¹Ÿå¯ä»¥çœç•¥
pnpm run dev
pnpm dev
```



### mono-repo

pnpm æ”¯æŒç›´æ¥ä½¿ç”¨ workspace æ„å»º mono-repo é¡¹ç›®ï¼ˆä¸€ä¸ªä»“åº“ä¸‹åŒæ—¶åŒ…å«å¤šä¸ªå­é¡¹ç›®ï¼‰ï¼Œå…³é”®æ¦‚å¿µå¦‚ä¸‹ï¼š

1. åˆ›å»º `pnpm-workspace.yaml` æŒ‡å®šéœ€è¦è§£æçš„å­é¡¹ç›®ï¼š
```yaml
packages:
  # packages ä¸‹çš„æ‰€æœ‰ç›®å½•éƒ½åˆ†åˆ«ä½œä¸ºç‹¬ç«‹å­é¡¹ç›®
  - 'packages/*'
  # docs ç›®å½•ä½œä¸ºä¸€ä¸ªå­é¡¹ç›®
  - docs
```

2. mono-repo å°†æ•´ä¸ªé¡¹ç›®è§†ä¸ºä¸€ä¸ª workspaceï¼Œç†è§£ä¸ºç”±æ ¹ç›®å½•ç®¡ç†ä¼—å¤šå­é¡¹ç›®


3. ä¿è¯æ ¹ç›®å½•ã€æ¯ä¸ªå­é¡¹ç›®éƒ½å­˜åœ¨ `package.json` æ–‡ä»¶ï¼Œå¹¶æœ‰ç‹¬ç«‹çš„ `name` å­—æ®µï¼š
```
|- vue-learn\
  |- docs\
    |- package.json        ------ hereï¼Œå­é¡¹ç›®
    |- ...
  |- packages\
    |- vue2-slots\
      |- package.json      ------ hereï¼Œå­é¡¹ç›®
      |- ...
    |- vue2-router\
      |- package.json      ------ hereï¼Œå­é¡¹ç›®
      |- ...
  |- package.json          ------ hereï¼Œæ ¹ç›®å½•
  |- pnpm-workspace.yaml
  |- ...
```


4. å„ä¸ªå­é¡¹ç›®çš„ `package.json` çš„ `name` å¯ä»¥ä½¿ç”¨ `@scope/name` çš„æ¨¡å¼å‘½ååŠ ä»¥åŒºåˆ†ï¼Œå‚è€ƒ [vue](https://github.com/vuejs/vue)ï¼Œ`scope` å¯ä»¥é€‰æ‹©é¡¹ç›®åå­—ï¼Œè‹¥è§‰å¾—å¤ªé•¿å¯ä»¥è‡ªè¡Œæ§åˆ¶ï¼ˆéç¡¬æ€§è¦æ±‚ï¼Œä¸»è¦æ˜¯è‡ªå·±èƒ½å¤ŸåŒºåˆ†ï¼Œå¦‚æœ¬é¡¹ç›®ä½¿ç”¨ `learn` ä»£æ›¿ `vue-learn`ï¼‰
```json
// æ ¹ç›®å½•çš„ package.jsonï¼Œname å¯¹åº”ä½ çš„é¡¹ç›®
{
  "name": "vue-learn"
}

// docs çš„ package.json
{
  "name": "@learn/docs"
}

// vue2-slots çš„ package.json
{
  "name": "@learn/vue2-slots"
}

// vue2-router çš„ package.json
{
  "name": "@learn/vue2-router"
}
```


5. åœ¨æ ¹ç›®å½•çš„ `package.json` ä¸­æ·»åŠ å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼Œè¿™é‡Œçš„ `name` è¦å¯¹åº”å­é¡¹ç›®çš„ `name`
    - åœ¨ mono-repo é¡¹ç›®ä¸­æ‰§è¡Œ `pnpm` é¡¹ç›®æ—¶ï¼Œéƒ½ä¼šä½¿ç”¨æ ¹ç›®å½•çš„é…ç½®
    - `--filter` è¡¨ç¤ºå°†å‘½ä»¤ï¼ˆå¦‚ `serve`ï¼‰ä½œç”¨äºæŒ‡å®šå­é¡¹ç›®ï¼ˆå¦‚ `@learn/vue2-slots`ï¼‰
```json
{
  // ...
  "scripts": {
    "learn:vue2-slots": "pnpm --filter @learn/vue2-slots serve",
    "docs:dev": "pnpm --filter @learn/docs docs:dev",
    "docs:build": "pnpm --filter @learn/docs docs:build",
    "docs:preview": "pnpm --filter @learn/docs docs:preview"
  }
  // ...
}
```


6. ä¾èµ–ç®¡ç†ï¼šæ ¹ç›®å½•ã€æ¯ä¸ªå­é¡¹ç›®ä¸‹éƒ½å­˜åœ¨ `node_modules` ç›®å½•ï¼Œè¿™æ˜¯ç”±äºï¼š
    - æ ¹ç›®å½•ä¸‹çš„ `node_modules` è¢«æ‰€æœ‰å­é¡¹ç›®å…±äº«ï¼Œå¹¶å¯ä»¥ç›´æ¥å¼•ç”¨
    - å­é¡¹ç›®ä¸‹çš„ `node_modules` ä»…è¢«è‡ªèº«ä½¿ç”¨
    - TODOï¼šå­é¡¹ç›®å¯ä»¥è¢«å­é¡¹ç›®å¼•ç”¨ï¼ˆè¿™é‡Œæš‚æ—¶æœªç”¨åˆ°ï¼Œåç»­è¡¥å……ï¼‰
```sh
# å®‰è£…åˆ°æ ¹ç›®å½•ï¼šä½¿ç”¨ -w å‚æ•°
pnpm add -w lodash-es


# å®‰è£…åˆ°æŒ‡å®šå­é¡¹ç›®ï¼šä½¿ç”¨ --filter æŒ‡å®šå­é¡¹ç›®
# ä»¥ä¸‹å‘½ä»¤å°† vitepress-plugin-tabs å®‰è£…åˆ°å­é¡¹ç›® @learn/docs
pnpm --filter @learn/docs add vitepress-plugin-tabs
```




## vitepress


äº†è§£æ›´å¤šå‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://vitepress.dev/)ï¼Œæ–‡ä»¶ç›®å½•ç®€ä»‹ï¼š
```
|- docs\
  |- .vitepress\         # vitepress é…ç½®ç›®å½•
    |- cache\            # æœ¬åœ°å¼€å‘æ—¶çš„ç¼“å­˜ç›®å½•ï¼Œä¸ç”¨ç®¡
    |- theme\            # ğŸŒˆ ä¸»é¢˜é…ç½®ï¼Œå¯ä»¥å®šä¹‰æ ·å¼ï¼Œæˆ–è€…å®šä¹‰è‡ªå·±çš„å¸ƒå±€ã€ä¸»é¢˜ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£
    |- config.ts         # ğŸš€ æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰ä¸œè¥¿éƒ½åœ¨è¿™é‡Œé…ç½®
  |- index.md            # æ–‡æ¡£é¦–é¡µï¼Œå¯ä»¥å¿«æ·å®šä¹‰ä¸€äº›å±æ€§
  |- package.json
  |- demo\               # æ–‡æ¡£ç›®å½•ï¼Œåå­—ä¼šè‡ªåŠ¨ç”Ÿæˆè·¯ç”±ï¼Œè¿™é‡Œä¸º /demo/
    |- vue2\             # æ–‡æ¡£ç›®å½•ï¼Œåå­—ä¼šè‡ªåŠ¨ç”Ÿæˆè·¯ç”±ï¼Œè¿™é‡Œä¸º /demo/vue2/
      |- vue2-slots.md   # æ–‡æ¡£è·¯å¾„ï¼Œå½“è·¯ç”±è·³è½¬åˆ° /demo/vue2/vue2-slots.md æ—¶ä¼šæ¸²æŸ“è¿™ä¸ª md æ–‡ä»¶
    |- demo-a.md         # æ–‡æ¡£è·¯å¾„ï¼Œå½“è·¯ç”±è·³è½¬åˆ° /demo/demo-a.md æ—¶ä¼šæ¸²æŸ“è¿™ä¸ª md æ–‡ä»¶
  |- hello-world.md      # æ–‡æ¡£è·¯å¾„ï¼Œå½“è·¯ç”±è·³è½¬åˆ° /hello-world.md æ—¶ä¼šæ¸²æŸ“è¿™ä¸ª md æ–‡ä»¶
  |- ...                 # å¯ä»¥æ ¹æ®éœ€è¦å®šä¹‰ä»»æ„å±‚çº§çš„æ–‡ä»¶ç›®å½•
```


å¤‡æ³¨ï¼šå¦‚æœä½ ç†Ÿæ‚‰é¡µé¢çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œé‚£ä¹ˆå¯¹ `index.html` è¿™ä¸ªåå­—çš„ `.html` æ–‡ä»¶ä¼šæ¯”è¾ƒæ•æ„Ÿï¼Œå› ä¸ºè®¿é—® `/path/to/index.html` ç›¸å½“äºè®¿é—® `/path/to/`ï¼Œä¹Ÿå°±æ˜¯è¯´çœç•¥å…·ä½“çš„èµ„æºè·¯å¾„æ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨åŠ è½½ `index.html`ï¼ˆé™¤éæœåŠ¡å™¨è¿›è¡Œäº†å…¶ä»–é…ç½®ï¼‰ã€‚

æ‰€ä»¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªçº¦å®šä¿—ç§°çš„ä¸œè¥¿ï¼Œå¾ˆå¤šå·¥å…·éƒ½ä¼šå°†è¿™ä¸ªæ¦‚å¿µä½œä¸ºä¸€ä¸ªæ ‡å‡†ï¼Œå¦‚è¿™é‡Œï¼Œå½“ä½ è®¿é—® `localhost:8080` æ—¶ï¼Œç›¸å½“äºè®¿é—®ï¼š
  - `localhost:8080/`
  - `localhost:8080/index.md`

è¿™ä¹Ÿå°±è¯´æ˜äº†ï¼Œä¸ºä»€ä¹ˆ vitepress åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `index.md` ä½œä¸ºé¦–é¡µçš„é»˜è®¤æ¸²æŸ“å†…å®¹ã€‚

è¿™äº›æ¦‚å¿µèƒ½åŠ æ·±ä½ å¯¹åç»­çš„é…ç½®æ–‡ä»¶çš„ç¼–å†™ã€‚


### é…ç½®æ–‡ä»¶

`config.ts` ä¸‹æ”¯æŒå¾ˆå¤šå…³äºé¡¹ç›®çš„é…ç½®ï¼Œå°½é‡å»çœ‹å®˜æ–¹æ–‡æ¡£ã€‚

ä¸å»ºè®®è®°å¿†è¿™ä¹ˆå¤šä¸œè¥¿ï¼Œæ‰€æœ‰å±æ€§å’Œå­—æ®µéƒ½æ˜¯çº¦å®šä¿—æˆçš„ï¼Œä¸€ç›®äº†ç„¶çŸ¥é“æ€ä¹ˆå›äº‹å°±è¡Œäº†ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿä¼šè¯´æ˜ç™½æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚

- `themeConfig.nav`ï¼šé¡¶éƒ¨å¯¼èˆª
  - `text`ï¼šæ˜¾ç¤ºçš„æ–‡æœ¬
  - `link`ï¼šç‚¹å‡»åè·³è½¬çš„è·¯å¾„ï¼Œæ²¡æœ‰è¯¥å­—æ®µè¯´æ˜æ˜¯ä¸€ä¸ªåˆ†ç»„
  - `items`ï¼šåµŒå¥—çš„åˆ†ç»„
```ts
export default defineConfig({
  // ...
  themeConfig: {
    nav: [
      // ç®€å•è®¾ç½®
      { text: 'Home', link: '/' },
      { text: 'Demo', link: '/demo/index.md' },
      { text: 'ä¸šåŠ¡åŠŸèƒ½', link: '/business/index.md' },

      // è®¾ç½®åˆ†ç»„
      {
        text: 'Vue',
        items: [
          { text: 'vue2', link: '/' },
          { text: 'vue3', link: '/' },
        ],
      },

      // è¿˜å¯ä»¥å†åˆ†ç»„
      {
        text: 'å‰ç«¯',
        items: [
          {
            text: 'Vue',
            items: [
              { text: 'vue2', link: '/' },
              { text: 'vue3', link: '/' },
            ]
          },
        ],
      },
    ],
  },
  // ...
})
```

- `themeConfig.sidebar`ï¼šé¡µé¢ä¾§è¾¹æ 
  - sidebar çš„ `key` æ˜¯ä¸€ä¸ªè·¯ç”± pathï¼Œå¯¹åº”ä½ çš„æ–‡æ¡£ç›®å½•çš„ç»„æˆï¼Œå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªåŒ¹é…åˆ°çš„ path ä¸‹ä¼šæ˜¾ç¤ºçš„ sidebar åˆ—è¡¨ï¼Œä¹Ÿå°±è¯´æ˜¯ä½ åªæœ‰é…ç½®å¥½äº†æ‰€æœ‰çš„ sidebar æ‰ä¼šæ­£ç¡®æ˜¾ç¤ºï¼ˆå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªè„šæœ¬æˆ–è€…æ’ä»¶å»è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚æœæœ‰å¿…è¦çš„è¯ï¼‰
```ts
export default defineConfig({
  // ...
  themeConfig: {
    sidebar: {
      // æ˜¾ç¤ºåˆ—è¡¨
      '/business/': [
        { text: 'Vue2 word è½¬æ¢ html', link: '/business/vue2-word2html.md' },
      ],

      // åˆ†ç»„æ˜¾ç¤ºï¼Œè¿˜å¯ä»¥é…ç½® collapsed å±æ€§æ˜¾ç¤ºæ”¶èµ·/å±•å¼€å›¾æ ‡
      '/demo/': [
        {
          text: 'Vue2',
          collapsed: true,
          items: [
            { text: 'Vue2 Slots çš„ä½¿ç”¨', link: '/demo/vue/vue2-slots.md' },
          ]
        },
      ],
    },
  },
  // ...
})
```


### ä¸»é¢˜

å¯ä»¥å®šä¹‰å¾ˆå¤šå®¢åˆ¶åŒ–çš„ä¸œè¥¿ï¼Œå–œæ¬¢æŠ˜è…¾æˆ–è€…è¦å¥½çœ‹çš„æ•ˆæœå¯ä»¥å»åšï¼Œæˆ–è€…ç”¨ç¬¬ä¸‰æ–¹ç°æˆçš„ä¸»é¢˜ã€‚


### ä½¿ç”¨ç»„ä»¶

å¯ä»¥åœ¨ md æ–‡æ¡£ä¸­å¼•å…¥ Vue ç»„ä»¶ï¼Œå¦‚ï¼š
1. åˆ›å»º `theme/HelloWorld.vue` ç»„ä»¶ï¼š
```vue
<template>
  <div>
    <h1>hello world</h1>
  </div>
</template>
```

2. åœ¨ `theme/index.ts` ä¸­å…¨å±€æ³¨å†Œï¼š
```ts
import HelloWorld from './HelloWorld.vue'

export default {
  // ...
  enhanceApp({ app, router, siteData }) {
    app.component('HelloWorld', HelloWorld)
  },
}
```

3. åœ¨ä½ çš„æ–‡æ¡£ä¸­ä½¿ç”¨ï¼Œå¦‚ `demo/index.md`
```md
## è¿™æ˜¯æ ‡é¢˜

è¿™ä¸ªé¡µé¢ä¼šå‡ºç°åœ¨ `/demo/vue` è·¯ç”±ä¸‹é¢

<HelloWorld />
```


### æ›´å¤šåŠŸèƒ½


- æ”¯æŒæ’ä»¶ï¼šæ”¯æŒè‡ªå®šä¹‰æˆ–ä½¿ç”¨å®˜æ–¹/ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¦‚æœ¬é¡¹ç›®é…ç½®äº† [vitepress-plugins-tabs](https://vitepress-plugins.sapphi.red/tabs/) æ’ä»¶
- æ”¯æŒç»„ä»¶åº“ï¼šæ”¯æŒå®‰è£… vue3 ç»„ä»¶åº“ï¼Œç”¨æ¥å®šä¹‰æ›´ä¸°å¯Œçš„ç•Œé¢
- ...
